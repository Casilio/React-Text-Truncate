{"version":3,"sources":["webpack:///truncate-text.js","webpack:///webpack/bootstrap 0ebcbda1d18527006af3?efc6","webpack:///external \"React\"?9de9","webpack:///C:/Users/u_blu_000/Documents/GitHub/TruncateText/src/TruncateText.js?589d"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","React","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","undefined","Function","getOwnPropertyDescriptor","get","getPrototypeOf","_react","_react2","TextTruncate","_React$Component","this","apply","arguments","canvas","document","createElement","docFragment","createDocumentFragment","appendChild","getContext","_this","scope","findDOMNode","refs","style","window","getComputedStyle","font","push","join","forceUpdate","addEventListener","text","measureText","width","textWidth","measureWidth","scopeWidth","truncateText","offsetWidth","n","max","splitPos","startPos","line","ext","substr","lastIndexOf","getRenderText","attrs","ref","title","PropTypes","string","number","bool","Component"],"mappings":"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","file":"truncate-text.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(3);\n\n\n/***/ },\n/* 1 */,\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = React;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _react = __webpack_require__(2);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar TextTruncate = (function (_React$Component) {\n\t    _inherits(TextTruncate, _React$Component);\n\t\n\t    function TextTruncate() {\n\t        _classCallCheck(this, TextTruncate);\n\t\n\t        _get(Object.getPrototypeOf(TextTruncate.prototype), 'constructor', this).apply(this, arguments);\n\t    }\n\t\n\t    _createClass(TextTruncate, [{\n\t        key: 'componentWillMount',\n\t        value: function componentWillMount() {\n\t            var canvas = document.createElement('canvas');\n\t            var docFragment = document.createDocumentFragment();\n\t            docFragment.appendChild(canvas);\n\t            this.canvas = canvas.getContext(\"2d\");\n\t        }\n\t    }, {\n\t        key: 'componentDidMount',\n\t        value: function componentDidMount() {\n\t            var _this = this;\n\t\n\t            this.scope = _react2['default'].findDOMNode(this.refs.scope);\n\t            var style = window.getComputedStyle(this.scope);\n\t            var font = [];\n\t            font.push(style['font-weight']);\n\t            font.push(style['font-style']);\n\t            font.push(style['font-size']);\n\t            font.push(style['font-family']);\n\t            this.canvas.font = font.join(' ');\n\t            this.forceUpdate();\n\t            window.addEventListener('resize', function () {\n\t                _this.forceUpdate();\n\t            });\n\t        }\n\t    }, {\n\t        key: 'measureWidth',\n\t        value: function measureWidth(text) {\n\t            return this.canvas.measureText(text).width;\n\t        }\n\t    }, {\n\t        key: 'getRenderText',\n\t        value: function getRenderText() {\n\t            var textWidth = this.measureWidth(this.props.text);\n\t            var ellipsisWidth = this.measureWidth(this.props.truncateText);\n\t            var scopeWidth = this.scope.offsetWidth;\n\t\n\t            if (scopeWidth >= textWidth) {\n\t                return this.props.text;\n\t            } else {\n\t                var n = 0;\n\t                var max = this.props.text.length;\n\t                var text = '';\n\t                var splitPos = 0;\n\t                var startPos = 0;\n\t                var line = this.props.line;\n\t                while (line--) {\n\t                    var ext = line ? \"\" : this.props.truncateText;\n\t                    while (n <= max) {\n\t                        n++;\n\t                        text = this.props.text.substr(startPos, n);\n\t                        if (this.measureWidth(text + ext) > scopeWidth) {\n\t                            splitPos = text.lastIndexOf(\" \");\n\t                            if (splitPos === -1) {\n\t                                splitPos = n - 1;\n\t                            }\n\t                            startPos += splitPos;\n\t                            break;\n\t                        }\n\t                    }\n\t                    if (n >= max) {\n\t                        startPos = max;\n\t                        break;\n\t                    }\n\t                    n = 0;\n\t                }\n\t                return startPos === max ? this.props.text : this.props.text.substr(0, startPos - 1) + this.props.truncateText;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render() {\n\t            var text = '';\n\t            if (this.refs.scope) {\n\t                text = this.getRenderText();\n\t            }\n\t            var attrs = {\n\t                ref: 'scope'\n\t            };\n\t            if (this.props.title) {\n\t                attrs.title = this.props.text;\n\t            }\n\t\n\t            return _react2['default'].createElement(\n\t                'div',\n\t                attrs,\n\t                text\n\t            );\n\t        }\n\t    }], [{\n\t        key: 'propTypes',\n\t        value: {\n\t            text: _react2['default'].PropTypes.string,\n\t            truncateText: _react2['default'].PropTypes.string,\n\t            line: _react2['default'].PropTypes.number,\n\t            title: _react2['default'].PropTypes.bool\n\t        },\n\t        enumerable: true\n\t    }, {\n\t        key: 'defaultProps',\n\t        value: {\n\t            text: '',\n\t            truncateText: '...',\n\t            line: 1,\n\t            title: true\n\t        },\n\t        enumerable: true\n\t    }]);\n\t\n\t    return TextTruncate;\n\t})(_react2['default'].Component);\n\t\n\texports['default'] = TextTruncate;\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** truncate-text.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0ebcbda1d18527006af3\n **/","module.exports = React;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"React\"\n ** module id = 2\n ** module chunks = 0 1\n **/","import React from 'react';\r\n\r\nexport default class TextTruncate extends React.Component {\r\n    static propTypes = {\r\n        text: React.PropTypes.string,\r\n        truncateText: React.PropTypes.string,\r\n        line: React.PropTypes.number,\r\n        title: React.PropTypes.bool\r\n    };\r\n\r\n    static defaultProps = {\r\n        text: '',\r\n        truncateText: '...',\r\n        line: 1,\r\n        title: true\r\n    };\r\n\r\n    componentWillMount() {\r\n        let canvas = document.createElement('canvas');\r\n        let docFragment = document.createDocumentFragment();\r\n        docFragment.appendChild(canvas);\r\n        this.canvas = canvas.getContext(\"2d\");\r\n    }\r\n    componentDidMount() {\r\n        this.scope = React.findDOMNode(this.refs.scope);\r\n        let style = window.getComputedStyle(this.scope);\r\n        let font = [];\r\n        font.push(style['font-weight']);\r\n        font.push(style['font-style']);\r\n        font.push(style['font-size']);\r\n        font.push(style['font-family']);\r\n        this.canvas.font = font.join(' ');\r\n        this.forceUpdate();\r\n        window.addEventListener('resize', () => {\r\n            this.forceUpdate();\r\n        });\r\n    }\r\n    measureWidth(text) {\r\n        return this.canvas.measureText(text).width;\r\n    }\r\n    getRenderText() {\r\n        let textWidth = this.measureWidth(this.props.text);\r\n        let ellipsisWidth = this.measureWidth(this.props.truncateText);\r\n        let scopeWidth = this.scope.offsetWidth;\r\n\r\n        if (scopeWidth >= textWidth) {\r\n            return this.props.text;\r\n        } else {\r\n            let n = 0;\r\n            let max = this.props.text.length;\r\n            let text = '';\r\n            let splitPos = 0;\r\n            let startPos = 0;\r\n            let line = this.props.line;\r\n            while(line--) {\r\n                let ext = line ? \"\" : this.props.truncateText;\r\n                while(n <= max) {\r\n                    n++;\r\n                    text = this.props.text.substr(startPos, n);\r\n                    if (this.measureWidth(text + ext) > scopeWidth) {\r\n                        splitPos = text.lastIndexOf(\" \");\r\n                        if (splitPos === -1) {\r\n                            splitPos = n - 1;\r\n                        }\r\n                        startPos += splitPos;\r\n                        break;\r\n                    }\r\n                }\r\n                if (n >= max) {\r\n                    startPos = max;\r\n                    break;\r\n                }\r\n                n = 0;\r\n            }\r\n            return startPos === max\r\n                      ? this.props.text\r\n                      : this.props.text.substr(0, startPos - 1) + this.props.truncateText;\r\n        }\r\n    }\r\n    render() {\r\n        let text = '';\r\n        if (this.refs.scope) {\r\n            text = this.getRenderText();\r\n        }\r\n        let attrs = {\r\n            ref: 'scope'\r\n        };\r\n        if (this.props.title) {\r\n            attrs.title = this.props.text;\r\n        }\r\n\r\n        return (\r\n            <div {...attrs}>{text}</div>\r\n        );\r\n    }\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/u_blu_000/Documents/GitHub/TruncateText/src/TruncateText.js\n **/"],"sourceRoot":""}